## 抖音一面

项目相关

项目过程中有没有给算法或者产品从研发角度提过建议

除了功能实现的问题，产品的发展方向上有没有提过建议

有没有遇到过模型回答不稳定，怎么解决

除了降级有没有其他方法

除了agent有没有考虑其他方式

有没有调研过workflow，为什么没用

prompt怎么做的，优化流程是什么样子的

如果没有算法团队支持，研发自己做优化的话，prompt优化有哪些手段

项目做的好和做到不好的地方

Redis为什么快

Redis分布式锁，怎么解决锁时间过短或过长的问题

看门狗的具体逻辑是什么，看门狗机制是怎么实现的

为什么项目选择MongoDB，不用MySQL

项目中不要支持事务吗

MySQL的数据一致性怎么保证的

了解MySQL的log吗，redolog和undolog的作用

MySQL的索引能具体介绍下吗

如果现在MySQL里有执行比较慢的SQL，怎么去优化

怎么看到底有没有命中索引

explain看哪个字段

Java里的线程池的工作流程是什么样子

日常用的排序算法有哪些

哪些是稳定的，哪些是非稳定的

算法题，leetcode.79 单词搜索，说了思路，时间超了，没有写完

## 喜马拉雅一面

项目相关

有没有用过流程编排工具，说个人试过coze，问有没有用过dify，反问时面试官说他们项目用的dify

觉得项目编排工具可以替换你项目中的流程吗

怎么评价agent的质量/大模型回答的效果

大模型transformer架构，不懂

日常开发过程中有没有用AI相关的工具

会去让AI写业务代码吗

为什么不用AI写业务代码

编程之外的AI工具呢

在Java中，new一个object，在Linux上运行占多大内存

Java线程池已经使用到最大线程，现在要回收线程，回收的是哪部分线程，回收的时候会去区分哪些线程是核心，哪些是非核心吗

线程池的队列，Linked和Array两种BlockingQueue在大并发的情况下，会有性能差异吗

除了底层数据结构，还有其他的点吗

http协议，2.0，3.0这些版本分别有什么改进

大模型里经常用的SSE协议，它是怎么做的

Redis内实现一个榜单，用什么存储结构

zset的底层的数据结构是什么样的

比如我有一个元素，要往跳表里插入，应该插入到跳表的什么位置，这个是怎么计算的

## 合合信息一面

项目相关

MySQL中innodb的索引结构

B+树的叶子节点保存了什么？除了索引列的数据还保存了什么？

聚簇索引和非聚簇索引保存的数据有什么区别？

什么是主键索引

MySQL有哪些类型的锁

间隙锁有什么作用，什么时候使用间隙锁，举个例子

MySQL用的什么版本，8以后的新功能知道吗

Redis的数据类型

zset的底层结构是什么

Redis的数据，key value在实际存储的时候是什么数据结构

比如list，知不知道listpack，新版本功能了解过吗

clickhouse执行一条SQL的逻辑

clickhouse的特点

列式存储有什么特点

ES数据库的特点

ES查询的过程

有没有用过http 2.0，http 2.0在之前的基础上做了什么优化

TCP怎么保证可靠传输

TCP什么时候进行重传

TCP快速重传，原理是什么，不用说拥塞控制了，具体快速重传是怎么做的

有没有遇到过网络相关的问题

域名劫持是怎么做到的，原理

DNS解析的过程是什么

你们用的是ipv4还是ipv6，不管是ipv4还是6是网络哪一层的协议

口头描述一下我想要矩形圆形三角形这类图形，使用抽象工厂模式，需要定义哪些类，提供哪些方法

知道哪些排序算法，哪些是稳定的

堆排序的逻辑

项目相关

项目难点，就说一个

了不了解MCP，用MCP和现在的agent工具有什么不同

说MCP只是规范了输入输出的agent工具，MCP和大模型的交互还是要经过agent，作为function call传给大模型，但面试官表现的不这么认为，但又不说

问了gap

## 兴业数金一面

spring boot的启动流程

spring boot怎么实现自动注册，自动装配

spring boot的配置文件加载优先级

java项目启动时怎么加载数据到Redis，多台机器的情况下：使用另一个服务定时加载热点数据，java内部用guava懒加载，一些简单的，少量的数据用@PostConstruct加载，如果数据量大，会影响程序的启动速度；

MongoDB和Redis保证一致性，双写+延迟写入（是写失败了发送到kafka）

怎么保证从oracle同步到MongoDB的幂等性的，怎么保证延迟写入的幂等性的

限流算法，固定窗口，滑动窗口，令牌桶，漏桶，各自的优缺点，**应对突发流量，是否平滑**

Redis内保存历史记录，有没有时间限制，list有没有长度限制；

雪花算法，为什么用雪花算法，有没有别的可以选的，分布式id



1.所有对象的公共类？Object类的公共方法有哪些，随便说几个你常用的？你刚才说了toStirng()，什么时候会调用toString()方法？
2.反射了解吗？
3.HaspMap、HashTable、ConcurrentHashMap三者的共同点和区别。这些集合的key可以为null吗？为什么HashTable的键不能为null？
4.红黑树的查询时间复杂度，插入时间复杂度。
5.线程池了解吗？启动线程池有哪些方法？如果现在有个8核CPU，你的核心线程数设置多少？
6.JVM了解吗？类的加载过程有哪些？双亲委派机制了解吗？知道打破双亲委派机制的场景吗？（tomcat）
7.gc了解吗？gc有哪几种？什么时候会触发full gc? 程序开始或者结束的时候会触发full gc吗？如果你设计一个垃圾回收器，你会怎么设计full gc的触发时刻？
8.gc清理的是什么东西？是只清理JVM的空间吗？
9.为什么使用多线程？多线程是为了解决什么问题？
10.注解的底层原理？元注解都有哪些？
11.mysql的索引结构。
12.Mysql的事务了解吗？ACID的实现原理。
13.你刚才说了redo log，除了它还有别的日志吗？redo log存了什么东西？
14.mysql的锁了解吗？有哪些锁？间隙锁左右区间怎么设置？为什么是左开右闭（联想间隙锁是为了解决什么问题）？什么是幻读？
15.Redis和Mysql的区别
16.Redis分布式锁了解吗？SetNX是针对单个资源的，如果有100个资源，你怎么上锁？你说使用消息队列，但是消息队列会导致串行化执行，导致用户等待时间过长，再想想。有没有减少用户等待时间的方法？Redis集群也仅是能缓解，再下去研究一下。
17.项目里的DAU数据为什么用Bitmap存储？为什么不用mysql存储？为什么不选择使用select xx count(*)来统计？
18.TCP四次挥手
19.TCP关闭连接后操作系统需要释放哪些资源？（四元组本地IP端口，远端IP端口）
20.TCP和UDP区别？分别有哪些使用场景
21.你觉得腾讯会议用的什么协议？（自研协议，基于UDP，实现更可靠，类似QUIC）了解QUIC吗？为什么HTTP3要使用QUIC？
22.ES分词器了解吗？都有哪些分词器？为什么选择ik分词器？
23.对于做spring、java开发中缓存一致性方面，如何保证强一致性、最终一致性，有哪些操作和选择。
24.怎么理解java面向对象
25.详细说说多态
26.java内存溢出，代码场景
27.对异常的理解
28.异常处理的方式？在实践中怎么看？什么情况下应该抛出给上层处理？如工具类本层无法处理，或者调用者的错误，比如参数传错了，或者有统一异常处理等。
29.知道哪些设计模式？
30.有一个门票计算，全票100，学生半价，老人军人免费，儿童半价1-1.2，1米以下免费。用什么模式合适。
31.天气预报，天气不同时用户收到不同通知，推荐不同行程，用什么设计模式。
32.SQL分页怎么写？
33.volatile关键字原理
34.多线程问题，ABC三个线程如何按规定顺序执行。

* thread.join
* lock和condition，await和signal
* semaphore/countdownLatch
* CompletableFuture

35.查问题的开源工具有了解吗。

2，除了通过 binlog 保证缓存和数据库更新这个不一致的问题，还知道哪些方式呢？
3，Binlog这种方式去更新缓存数据，肯定有优势，但是它的劣势是什么？会不会有一些其他的问题？
4，这种策略的话会不会带来脏数据？或者会不会有可能就是缓存没写进去，或者说带来其他问题？
5，怎么理解 spring 的事务？ spring 事务机制的这个原理是什么？
6，注解实现，这个是什么式的？你刚才说了一个编程式的，还有一种是什么？
7，除了AOP切面，在你的业务代码前后运行，但是它还有一个关键点你知道吗？
8，重复支付问题，比如说存在一个订单有两个以上的支付记录就做退款，这是一个后置逆等性的一种操作，除了这种方式有没有了解过业界怎么处理这种重复支付的问题，有没有常规的方式来规避？
9，用户做支付的动作的时候，比如说就是重复点了两次，在用户支付到落库这个过程之前，就做了拦截，有没有什么方法？（面试官说我的思维一直在后端，可以考虑前段这边啥的，比如验证码）
10，synchronized 关键字实现原理是什么？
11，你说到了锁升级过程，那降级过程呢，比如什么情况下重量级锁会降级为轻量级锁？
12，知道ReentrantLock？
13，既然有了 synchronized 这个关键字之后，还需要这个 ReentrantLock？它有什么优势呢？
14，用的 Java 几啊？
15，知不知道Java8相比于7，synchronized 有什么优化？或者6比5有什么优化（面试官解释synchronized的降级过程是某个版本之后才有的）
16，concurrenthashmap怎么做到线程安全的呢？还有哪些关键性的因素？
17，Spring 的 bean 的生命周期吗？
18，Bean Processor 这个有真实的去用吗？比如说在前置去做一些调度性的工作，或者说给它增加一些核心，这个有用到过吗？
19，在一个静态方法，它没有被 Spring 托管，或者一个静态类里面，它没有被 Spring 托管，那想在这个静态类里面去获取这个bean，有什么方法？
20， G1 垃圾回收器，描述一下这个垃圾回收器主要的一些功能
21，现在有一个非常大的对象，想直接分配到老年代，有什么好的办法？
22，可以提前晋升到老年代的，这个是在哪个回收器上可以用？

jvm参数设定，xmx，xms，为什么两个要设一样：防止jvm扩容，影响程序

线程池启用

1. 手撕代码，没要求运行，是给定一些日期区间，有起始时间和终止时间，求重叠的时间段。面试官非常详细的介绍了这个题目的背景，商家在确定酒店价格的时候不能选择重复的时间段。题目中要求时间复杂度是O(n)
2. 敏感词过滤怎么实现的
3. 目前互联网中要屏蔽的敏感词很多，还有什么时间复杂度更低的算法
4. 有些人会在敏感词中间插入一些字符，这样该怎么判断敏感词
5. Kafka如何保证消息的可靠性
6. 用户点赞失败后如何解决
7. Redis中如何
8. 出现过缓存穿透吗，如何解决
9. 用户登录凭证怎么做的
10. 多种身份的用户怎么实现鉴权
11. 出了一个场景，像知乎盐选，冲了会员才能看一些内容，管理员也能将用户设置成非会员，如何实现这个功能（这边简单回答了之后，还是追问了一些）
12. 用户会员过期了怎么办（到时间会员过期，或是管理员让这个用户会员过期）
13. Redis集群有一个节点挂了，怎么办
14. 所有的节点都不可用了怎么办
15. 这时候描述一下大量请求到服务端到数据库的这个过程是怎样的
16. 说了限流和熔断，追问服务器端要怎么做，数据库端要怎么做
17. Redis中某个请求很多的Key（上万）怎么分担压力（分片）

1.问了项目，详细讲看门狗机制，说一下底层原理（这里大概battle了20分钟，一直问源码）
2.详细讲发布订阅模式
3.详细讲锁的释放（lua脚本）
4.为什么不用setnx
5.如果用setnx怎么解决保证超时释放问题？
6.乐观锁解决==超卖==没get到，详细讲（就说是利用CAS原子性的查和更新，这个回答是对的）

innodb架构

Java事务不生效的情况







